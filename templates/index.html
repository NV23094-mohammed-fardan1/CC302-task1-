{% extends "base.html" %}
{% block content %}

<h2 class="mb-4">Dashboard</h2>

<div class="row align-items-center mb-4">

<div class="col-md-3 text-center">
<canvas id="completionChart" width="180" height="180"></canvas>
<p class="mt-2">Completion</p>
</div>

<div class="col-md-3 text-center">
<h6>Total Tasks</h6>
<h3>{{total}}</h3>
</div>

<div class="col-md-3 text-center">
<h6>Completed</h6>
<h3>{{completed}}</h3>
</div>

<div class="col-md-3 text-center">
<h6>Pending</h6>
<h3>{{pending}}</h3>
</div>

</div>

<hr>

<form action="/add" method="POST" class="row g-2 mb-4">

<div class="col-md-4">
<input name="task" class="form-control" placeholder="Task" required>
</div>

<div class="col-md-2">
<select name="category" class="form-select">
<option>Work</option>
<option>Personal</option>
<option>Study</option>
</select>
</div>

<div class="col-md-2">
<select name="priority" class="form-select">
<option>Low</option>
<option>Medium</option>
<option>High</option>
</select>
</div>

<div class="col-md-2">
<input type="date" name="due_date" class="form-control">
</div>

<div class="col-md-2">
<button class="btn btn-primary w-100">Add</button>
</div>

</form>

{% for task in todos %}

<div class="card mb-2 task-card">
<div class="card-body d-flex justify-content-between align-items-center">

<div>
<h5 class="{% if task.completed %}completed{% endif %}">
{{task.task}}
</h5>

<small class="text-muted">
{{task.category}} | {{task.priority}}
{% if task.due_date %}
 | Due: {{task.due_date}}
{% endif %}
</small>
</div>

<div>
<a href="/complete/{{task.id}}" class="btn btn-success btn-sm">âœ”</a>
<a href="/edit/{{task.id}}" class="btn btn-warning btn-sm">Edit</a>
<a href="/delete/{{task.id}}" class="btn btn-danger btn-sm">Delete</a>
</div>

</div>
</div>

{% endfor %}


<script>
new Chart(document.getElementById('completionChart'),{
type:'doughnut',
data:{
labels:['Completed','Remaining'],
datasets:[{
data:[{{completed}},{{pending}}],
}]
},
options:{
responsive:false,
cutout:'70%'
}
});
</script>

{% endblock %}
